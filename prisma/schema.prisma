generator client {
  provider = "prisma-client-js"
}

generator shared {
  provider = "prisma-client-js"
  output   = "../../shared-types"
}

generator nestjsDto {
  provider = "prisma-generator-nestjs"
  output   = "../src/shared/models/gen/dto"
  prettier = "true"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userId       Int      @id @default(autoincrement())
  username     String   @unique
  password     String
  creationDate DateTime @default(now()) @ignore @db.Timestamptz()
  updateDate   DateTime @updatedAt @ignore @db.Timestamptz()
  Person       Person?
}

model Person {
  personId      Int         @id @default(autoincrement())
  fullname      String
  email         String
  user          User        @relation(fields: [userId], references: [userId])
  userId        Int         @unique
  jobPosition   JobPosition @relation(fields: [jobPositionId], references: [jobPositionId])
  jobPositionId Int
}

model JobPosition {
  jobPositionId Int        @id @default(autoincrement())
  name          String
  Persons       Person[]
  department    department @relation(fields: [departmentId], references: [departmentId])
  departmentId  Int
}

model department {
  departmentId Int           @id @default(autoincrement())
  name         String
  jobPositions JobPosition[]
}
